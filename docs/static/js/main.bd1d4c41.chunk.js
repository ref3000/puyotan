(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),r=n(4),a=(n(14),n(16),function(){return s.a.createElement("div",{className:"AppHeader"},s.a.createElement("div",{className:"AppHeader-title"},"\u3077\u3088\u305f\u3093\u03b2"),s.a.createElement("div",{className:"AppHeader-version"},"v0.1"))}),h=n(1),o=n(2),u=n(6),c=n(5),l=n(7),f=(n(18),function(){function e(t){Object(h.a)(this,e),this.y=null==t?2147483647*Math.random():t}return Object(o.a)(e,[{key:"setSeed",value:function(e){this.y=e}},{key:"next",value:function(){return this.y=this.y^this.y<<13,this.y=this.y^this.y>>17,this.y=this.y^this.y<<15,this.y>>>0}},{key:"nextInt",value:function(e){return Math.abs(this.next())%e}}]),e}()),d={BRANK:0,RED:1,GREEN:2,BLUE:3,YELLOW:4,PURPLE:5,IRON:6,OJAMA:7,WALL:8,PEKE:9};function y(e){return null==e}var v=function e(t,n){Object(h.a)(this,e),this.axis=y(t)?d.BRANK:t,this.sub=y(n)?d.BRANK:n},w=function(){function e(t,n){Object(h.a)(this,e),this.init(t,n)}return Object(o.a)(e,[{key:"init",value:function(e,t){(null==t&&(t="random"),this._mode=t,null==e)&&(e=(new f).nextInt(16777216));this._seed=e,this._random=new f(this._seed),this._size=1e3,this._puyos=[];for(var n=0;n<this._size;n++)this._puyos.push(new v(this._nextKind(),this._nextKind()))}},{key:"size",value:function(){return this._size}},{key:"get",value:function(e){return this._puyos[e%1024]}},{key:"_nextKind",value:function(){switch(this._random.nextInt(4)){case 0:return d.RED;case 1:return d.GREEN;case 2:return d.BLUE;case 3:return d.YELLOW;default:throw new Error("unexpected error")}}},{key:"seed",value:function(){return this._seed}},{key:"edit",value:function(e,t,n){e>=this._size||e<0||(n?this._puyos[e].axis=t:this._puyos[e].sub=t)}}]),e}(),m=function e(t,n){Object(h.a)(this,e),this.x=isNaN(t)?0:t,this.y=isNaN(n)?0:n},k=function(){function e(){Object(h.a)(this,e),this.height=13,this.width=6,this._field=[];for(var t=0;t<this.height+1;t++){for(var n=[],i=0;i<this.width;i++)n.push(d.BRANK);this._field.push(n)}}return Object(o.a)(e,[{key:"isBrank",value:function(e){return this.get(e)===d.BRANK}},{key:"get",value:function(e){return e.y<1||e.x<1||e.x>this.width?d.WALL:e.y>this.height?d.BRANK:this._field[e.y-1][e.x-1]}},{key:"set",value:function(e,t){e.y<1||e.y>this.height+1||e.x<1||e.x>this.width||(this._field[e.y-1][e.x-1]=t)}},{key:"fall",value:function(){for(var e=!1,t=1;t<=this.width;t++)for(var n=1,i=1;i<=this.height;i++){var s=this.get(new m(t,i));s!==d.BRANK&&(s!==d.WALL?(this.set(new m(t,i),this.get(new m(t,n))),this.set(new m(t,n),s),n!==i&&(e=!0),n++):n=i+1)}for(var r=1;r<=this.width;r++)this.set(new m(r,14),d.BRANK);return e}},{key:"canFall",value:function(){for(var e=1;e<=this.width;e++)for(var t=2;t<=this.height;t++)if(this.isBrank(new m(e,t-1))&&!this.isBrank(new m(e,t))&&this.get(new m(e,t))!==d.WALL)return!0;return!1}},{key:"_countConnection",value:function(e,t,n){return this.get(e)===d.IRON?0:this.get(e)===d.PEKE?0:this.get(e)===d.WALL?0:this.get(e)===d.BRANK?0:this.get(e)===d.OJAMA?0:this.get(e)!==t?0:n.get(e)!==d.BRANK?0:e.y>=13?0:(n.set(e,t),this._countConnection(new m(e.x,e.y+1),t,n)+this._countConnection(new m(e.x+1,e.y),t,n)+this._countConnection(new m(e.x,e.y-1),t,n)+this._countConnection(new m(e.x-1,e.y),t,n)+1)}},{key:"countConnection",value:function(t){return this._countConnection(t,this.get(t),new e)}},{key:"_deleteConnection",value:function(e,t){return this.get(e)===d.BRANK?0:this.get(e)===d.OJAMA?(this.set(e,d.BRANK),0):this.get(e)!==t?0:e.y>=13?0:(this.set(e,d.BRANK),this._deleteConnection(new m(e.x,e.y+1),t)+this._deleteConnection(new m(e.x+1,e.y),t)+this._deleteConnection(new m(e.x,e.y-1),t)+this._deleteConnection(new m(e.x-1,e.y),t)+1)}},{key:"deleteConnection",value:function(e){return this._deleteConnection(e,this.get(e))}},{key:"canFire",value:function(){for(var t=new e,n=1;n<this.height;n++)for(var i=1;i<=this.width;i++){var s=new m(i,n);if(this._countConnection(s,this.get(s),t)>=4)return!0}return!1}},{key:"stepFire",value:function(){for(var t=new function e(){Object(h.a)(this,e),this.num=0,this.connections=[],this.color=0},n=new e,i={},s=1;s<this.height;s++)for(var r=1;r<=this.width;r++){var a=new m(r,s),o=this.get(a),u=this._countConnection(a,o,n);u>=4&&(this.deleteConnection(a),t.num+=u,t.connections.push(u),i[o]=!0)}return t.color=Object.keys(i).length,t}},{key:"Height",value:function(){return this.height}},{key:"Width",value:function(){return this.width}},{key:"copy",value:function(){for(var t=new e,n=1;n<=this.height;n++)for(var i=1;i<=this.width;i++){var s=new m(i,n);t.set(s,this.get(s))}return t}},{key:"equal",value:function(e){for(var t=1;t<=this.height;t++)for(var n=1;n<=this.width;n++){var i=new m(n,t);if(this.get(i)!==e.get(i))return!1}return!0}},{key:"isAllClear",value:function(){for(var e=1;e<=this.height;e++)for(var t=1;t<=this.width;t++){var n=new m(t,e);if(this.get(n)!==d.BRANK)return!1}return!0}},{key:"map",value:function(e){for(var t=[],n=1;n<=this.height;n++)for(var i=1;i<=this.width;i++){var s=new m(i,n),r=this.get(s);t.push(e(s,r))}return t}}]),e}(),g={Kind:d,Pos:m,Next:w,Field:k},p=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={next:new g.Next,field1:new g.Field,field2:new g.Field},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log(this.state.field1),s.a.createElement("div",{className:"Game"},s.a.createElement("div",{className:"Game-field Game-pos-field1"},this.fieldToElements(this.state.field1)),s.a.createElement("div",{className:"Game-field Game-pos-field2"},this.fieldToElements(this.state.field2)))}},{key:"fieldToElements",value:function(e){var t=this;return e.map(function(e,n){var i={left:32*(e.x-1),top:32*(13-e.y)},r=t.kindToClassName(n);return s.a.createElement("div",{key:"".concat(e.x,"_").concat(e.y),style:i,className:"Game-puyo ".concat(r)})})}},{key:"kindToClassName",value:function(e){switch(e){case g.Kind.RED:return"Game-puyo-kind-red";case g.Kind.BLUE:return"Game-puyo-kind-blue";case g.Kind.GREEN:return"Game-puyo-kind-green";case g.Kind.YELLOW:return"Game-puyo-kind-yellow";case g.Kind.OJAMA:return"Game-puyo-kind-ojama";default:return"Game-puyo-kind-blank"}}}]),t}(s.a.Component),_=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(a,null),s.a.createElement(p,null))};n(20);Object(r.render)(s.a.createElement(_,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(22)}},[[8,2,1]]]);
//# sourceMappingURL=main.bd1d4c41.chunk.js.map