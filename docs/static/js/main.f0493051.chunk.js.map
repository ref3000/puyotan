{"version":3,"sources":["assets/puyo_field_back.png","ChatBox.js","App.js","index.js"],"names":["module","exports","ChatBox","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","submit","e","onButtonClick","name","state","text","setState","_this2","react_default","a","createElement","className","placeholder","value","onChange","target","onClick","React","Component","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","firestore","settings","timestampsInSnapshots","n","sort","b","console","log","App","chatObj","cvs","refs","canvas","chatObjs","concat","collection","add","updatedAt","FieldValue","serverTimestamp","then","catch","error","onSnapshot","querySnapshot","data","docs","filter","v","metadata","hasPendingWrites","map","seconds","Date","getTime","ctx1","canvas1","getContext","ctx2","canvas2","image","Image","onload","drawImage","src","imgFieldBack","list","i","key","ref","width","height","ChatBox_ChatBox","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.f0493051.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAAGgCAIAAABzPf++AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA2eSURBVHhe7dyhDQNBEATBT8vcwX0mTtOk+aBiW+Rg66TB+3yxD1aGKcOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzA1oKMOUYcowN6ChDFOGKcPcgIYyTBmmDHMDGsowZZgyzPNiP6wMU4Ypw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmBvQUIYpw5RhbkBDGaYMU4a5AQ1lmDJMGeYGNJRhyjBlmKeX6R9MGaYMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjB3YGoow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMHZgayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwemhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yBqaEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjB3YGoow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMHZgayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwemhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yBqaEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjB3YGoow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMHZgayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYMcwMayjBlmDLMDWgow5RhyjA3oKEMU4Ypw9yAhjJMGaYM8r5/AmYDAJo1XwgAAAAASUVORK5CYII=\"","import React from \"react\";\n\nexport default class ChatBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onButtonClick = props.onButtonClick;\n    this.state = {\n      name: \"\",\n      text: \"\"\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"ChatBox\">\n        <input placeholder=\"名前\" value={this.state.name} onChange={(e) => this.setState({ name: e.target.value })} />\n        <textarea placeholder=\"コメント\" value={this.state.text} onChange={(e) => this.setState({ text: e.target.value })} />\n        <button onClick={this.submit}>送信</button>\n      </div>\n    );\n  }\n\n  submit = (e) => {\n    this.onButtonClick({\n      name: this.state.name,\n      text: this.state.text\n    });\n    this.setState({\n      text: \"\"\n    });\n  }\n}","import React from 'react';\nimport './App.css';\nimport ChatBox from './ChatBox';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nimport imgFieldBack from './assets/puyo_field_back.png';\n\nimport Game from './lib/Game';\n\n//インスタンスの初期化\nfirebase.initializeApp({\n  apiKey: \"AIzaSyDNckvdwFU9B-Xg3YPY-tgsrj09kg0MTxE\",\n  authDomain: \"puyotan-be458.firebaseapp.com\",\n  databaseURL: \"https://puyotan-be458.firebaseio.com\",\n  projectId: \"puyotan-be458\",\n  storageBucket: \"puyotan-be458.appspot.com\",\n  messagingSenderId: \"1067679324903\"\n});\n\nconst db = firebase.firestore();\nconst settings = { timestampsInSnapshots: true };\ndb.settings(settings);\n\nconst a = [{ n: 1 }, { n: 3 }, { n: 5 }, { n: 2 }];\na.sort((a, b) => a.n - b.n);\nconsole.log(a);\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chatObjs: []\n    }\n    db.collection(\"comments\").onSnapshot((querySnapshot) => {\n      const data = querySnapshot.docs.filter((v) => !v.metadata.hasPendingWrites).map((v) => {\n        const data = v.data();\n        return {\n          name: data.name,\n          text: data.text,\n          updatedAt: data.updatedAt != null ? data.updatedAt.seconds : (new Date().getTime() / 1000)\n        }\n      });\n      data.sort((a, b) => {\n        return a.updatedAt - b.updatedAt\n      });\n      this.setState({\n        chatObjs: data\n      });\n    });\n  }\n\n  componentDidUpdate() {\n    const ctx1 = this.refs.canvas1.getContext('2d');\n    const ctx2 = this.refs.canvas2.getContext('2d');\n\n    const image = new Image();\n    image.onload = () => {\n      ctx1.drawImage(image, 0, 0);\n      ctx2.drawImage(image, 0, 0);\n    }\n    image.src = imgFieldBack;\n  }\n\n  render() {\n    console.log('render');\n\n    var list = this.state.chatObjs.map((v, i) => <p key={i}>{v.name}: {v.text} :{v.updatedAt}</p>);\n\n    return (\n      <div className=\"App\">\n        <h1>ぷよたんテスト</h1>\n        <canvas ref=\"canvas1\" width=\"192px\" height=\"416px\" className=\"canvasField\"></canvas>\n        <canvas ref=\"canvas2\" width=\"192px\" height=\"416px\" className=\"canvasField\"></canvas>\n        {list}\n        <ChatBox onButtonClick={this.onButtonClick} />\n      </div>\n    );\n  }\n\n  onButtonClick = (chatObj) => {\n    const cvs = this.refs.canvas;\n    console.log(cvs)\n    console.log(chatObj);\n    this.setState({\n      chatObjs: this.state.chatObjs.concat(chatObj)\n    });\n    db.collection(\"comments\").add({\n      name: chatObj.name,\n      text: chatObj.text,\n      updatedAt: firebase.firestore.FieldValue.serverTimestamp()\n    })\n      .then(function () {\n        console.log(\"Document successfully written!\");\n      })\n      .catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}